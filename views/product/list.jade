extends ../layout

block content
  .col-sm-9.midlle-bar
    .large-title-row
      img(src='/images/title-icon.png', alt='icon')
      |  PRODUCTS
    .top-btns.clearfix
      .btn-s-right
        a.default-btn(href='#modal-container', title='Add Product', role='button', data-toggle='modal') ADD PRODUCT  
        //a.default-btn(href='/product/add', title='Add Size', role='button', data-toggle='modal') ADD PRODUCT  
    .customer-box.clearfix
      include ../partials/product_left_menu
      .profile-cl
        .profile-top-row
          h2 MANAGE PRODUCTS
        .profile-form-box.users-in
          .low-tbl-box.large-table.order-txt
            
              table(width='100%', cellspacing='0', cellpadding='0', border='0')
                tbody
                  tr
                    th(align='center')
                      input#checkbox2(type='checkbox', name='checkbox2')
                    th
                      | PRODUCT NAME 
                      span.paginng-icon
                        img(src='/images/list-arrow.png', alt='arrow')
                    th
                      | PRICE 
                      span.paginng-icon
                        img(src='/images/list-arrow.png', alt='arrow')
                        
                    th
                      | BRAND 
                      span.paginng-icon
                        img(src='/images/list-arrow.png', alt='arrow')
                    th
                      | CATEGORY 
                      span.paginng-icon
                        img(src='/images/list-arrow.png', alt='arrow')
                    th  IMAGES
                    //th PRODUCT NAME
                    //th
                      | SIZE 
                      span.paginng-icon
                        img(src='/images/list-arrow.png', alt='arrow')
                    
                    //th
                      | SUBCATEGORY 
                      span.paginng-icon
                        img(src='/images/list-arrow.png', alt='arrow')
                    
                    //th
                      | SOLD 
                      span.paginng-icon
                        img(src='/images/list-arrow.png', alt='arrow')
                    //th ON HAND
                    //th
                      | SALES 
                      span.paginng-icon
                        img(src='/images/list-arrow.png', alt='arrow')
                    th
                      a(href='#')
                        img(src='/images/delete-icon.png', alt='icon')

                  if fetchAllProducts.length > 0
                    -var i = 0;
                    each fetchAllProduct in fetchAllProducts
                      - i++;
                      tr(class='productTr_#{fetchAllProduct._id}')
                       td #{i}
                       td #{fetchAllProduct.name}
                       td #{fetchAllProduct.price}
                       td #{brandAr[fetchAllProduct.brand_id]}
                       td #{categoryAr[fetchAllProduct.category_id]}
                       
                       td Image
                       //td #{fetchAllProduct.is_featured}
                       td 
                          a.edit_product(href='/product/list/#{fetchAllProduct._id}') Edit | &nbsp;
                          a.edit_product(href='#' onclick='make_sure_for_product("#{fetchAllProduct._id}")') Remove             
                  else
                    tr
                      td(colspan=7) No Products    
    

    // --- add product popup --
    #modal-container.modal.fade.cmn-popup(role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
      .modal-dialog.popup-wdt-2
        form(name='addproduct', action='/product/save', method='POST' enctype='multipart/form-data')
          .modal-content.add_product
            .modal-header
              button.close(type='button', data-dismiss='modal', aria-hidden='true')  × 
              .clearfix
            .modal-body
              .cam_upload
                a(href='#')
                  img(src='/images/upload_cam.png')
              ul.up-list
                li
                  .fileUpload
                    span.custom-span +
                    p.custom-para UPLOAD PHOTO
                    input#uploadBtn1.upload(type='file',name='product_image',required='required')
                li
                  .fileUpload
                    span.custom-span +
                    p.custom-para UPLOAD PHOTO
                    input#uploadBtn2.upload(type='file',name='product_image2',required='required')
                li
                  .fileUpload
                    span.custom-span +
                    p.custom-para UPLOAD PHOTO
                    input#uploadBtn3.upload(type='file',name='product_image3',required='required')
                li
                  .fileUpload
                    span.custom-span +
                    p.custom-para UPLOAD PHOTO
                    input#uploadBtn4.upload(type='file',name='product_image4',required='required')

              .profile-right-cl.popup_product
                form(method='post', action='')
                  .profile-frm-row
                    .profile-frm-cl1 PRODUCT NAME
                    .profile-frm-cl2
                      input.product_name(type='text', name='name', value='', required='required')
                  .profile-frm-row
                    .profile-frm-cl1 PROCUCT BLURB
                    .profile-frm-cl2
                      input(type='text', value='', name='blurb')
                      
                  .profile-frm-row.product_select
                    .profile-frm-cl1 BRAND
                    .profile-frm-cl2
                      select.product_brand(name='brand_id', required='required')
                           option(value='0') Select Brand
                           each allBrand in allBrands
                            option(value='#{allBrand._id}') #{allBrand.brand_name}

                  .profile-frm-row.product_select
                    .profile-frm-cl1 SKU-ID
                    .profile-frm-cl2
                      input.sku(type='text', name='sku', value='', required='required')
                  .profile-frm-row.product_select
                    .profile-frm-cl1 GENDER
                    .profile-frm-cl2
                      select#product_gender.product_brand(name='gender', required='required')
                            option(value='') Select Gender
                            option(value='male') Male
                            option(value='female') female
                            option(value='unisex') Unisex
                        
                  .profile-frm-row.product_select
                    .profile-frm-cl1 CATEGORY
                    .profile-frm-cl2
                      select.product_category(name='category_id' onchange='loadSelectedsubCategory(this.value)')
                        option(value='0') Select Category
                        each fetchCategory in fetchCategories
                          option(value='#{fetchCategory._id}') #{fetchCategory.name}

                  .profile-frm-row.product_select
                    .profile-frm-cl1 SUBCATEGORY
                    .profile-frm-cl2
                      select.product_sub_category(name='sub_category_id', required='required')
                        option(value='0') Select Sub Category
                        each fetchSubCategory in fetchSubCategories
                          option(value='#{fetchSubCategory._id}') #{fetchSubCategory.name}

                  .profile-frm-row.product_select
                    .profile-frm-cl1 PRICE
                    .profile-frm-cl2
                      input.product_desc(type='text', name='price', value='', required='required')
                      
                  .profile-frm-row.product_select.slctClr
                    .profile-frm-cl1 COLOR
                    .profile-frm-cl2
                      select.color(name='color[]',id='color' required='required')
                        each fetchAllColor in fetchAllColors
                          option(value='#{fetchAllColor._id}') #{fetchAllColor.color_name}
                  
                          
                  .profile-frm-row.product_select
                    .profile-frm-cl3
                      a(href='#') APPLY DISCOUNT CODE
                      
                  .profile-frm-row.product_select.slctClr#lastColorSelect
                    .profile-frm-cl1
                    .profile-frm-cl2
                      select.color(name='color[]', required='required')
                        each fetchAllColor in fetchAllColors
                          option(value='#{fetchAllColor._id}') #{fetchAllColor.color_name}

                  .profile-frm-row#addClrBtn1
                    .profile-frm-cl3
                      a(href='javascript:void(0);',id='addMoreColor') ADD COLOR

                  
                         

                  
                      
                  //.profile-frm-row.product_size
                    .sg-row
                      span.sz-txt Size
                      a(href='#') xs
                      a(href='#') s
                      a(href='#') m
                      a(href='#') l
                      a(href='#') xl
                      a(href='#') xxl
                  //.clearfix
                  
            .modal-footer
              input.saveproduct(type='submit', name='saveproduct', value='POST TO FEED')

            script(type='text/javascript').
                $('#ancUpProduct').trigger('click');
                    attributeOptions = new Array();;



    -if(editProduct){
    a#ancUpProduct.default-btn(href='#modal1-container', title='Add Product', role='button', data-toggle='modal') ADD PRODUCT  
    #modal1-container.modal.fade.cmn-popup(role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
      .modal-dialog.popup-wdt-2
        form(name='addproduct', action='/product/update', method='POST' enctype='multipart/form-data')
          .modal-content.add_product
            input(type='hidden',name='productId',value='#{productRes._id}')
            .modal-header
              button.close(type='button', data-dismiss='modal', aria-hidden='true')  × 
              .clearfix
            .modal-body
              .cam_upload
                a(href='#')
                  img(src='/images/upload_cam.png')
              ul.up-list
                li
                  .fileUpload
                    span.custom-span +
                    p.custom-para UPLOAD PHOTO
                    input#uploadBtn1.upload(type='file',name='product_image')
                li
                  .fileUpload
                    span.custom-span +
                    p.custom-para UPLOAD PHOTO
                    input#uploadBtn2.upload(type='file',name='product_image2')
                li
                  .fileUpload
                    span.custom-span +
                    p.custom-para UPLOAD PHOTO
                    input#uploadBtn3.upload(type='file',name='product_image3')
                li
                  .fileUpload
                    span.custom-span +
                    p.custom-para UPLOAD PHOTO
                    input#uploadBtn4.upload(type='file',name='product_image4')

              .profile-right-cl.popup_product
                form(method='post', action='')
                  .profile-frm-row
                    .profile-frm-cl1 PRODUCT NAME
                    .profile-frm-cl2
                      input.product_name(type='text', name='name', value='#{productRes.name}', required='required')
                  .profile-frm-row
                    .profile-frm-cl1  PROCUCT BLURB
                    .profile-frm-cl2
                      input(type='text', value='#{productRes.blurb}', name='blurb',required='required')
                  .profile-frm-row.product_select
                    .profile-frm-cl1 BRAND
                    .profile-frm-cl2
                      select.product_brand(name='brand_id', required='required')
                           option(value='0') Select Brand
                           each allBrand in allBrands
                            option(value='#{allBrand._id}',selected=(allBrand._id == productRes.brand_id)) #{allBrand.brand_name} 

                  .profile-frm-row.product_select
                    .profile-frm-cl1 SKU-ID
                    .profile-frm-cl2
                      input.sku(type='text', name='sku', value='#{productRes.sku}', required='required')
                  .profile-frm-row.product_select
                    .profile-frm-cl1 GENDER
                    .profile-frm-cl2
                      select#product_gender_edit.product_brand(name='gender', required='required')
                        option(value='') Select Gender
                        option(value='male',selected=(productRes.gender == 'male')) Male
                        option(value='female',selected=(productRes.gender == 'female')) female
                        option(value='unisex',selected=(productRes.gender == 'unisex')) Unisex
                            
                  .profile-frm-row.product_select
                    .profile-frm-cl1 CATEGORY
                    .profile-frm-cl2
                      select.product_category(name='category_id' onchange='loadSelectedsubCategory(this.value)')
                        option(value='0') Select Category
                        each fetchCategory in fetchCategories
                          option(value='#{fetchCategory._id}',selected=(fetchCategory._id == productRes.category_id)) #{fetchCategory.name}

                  .profile-frm-row.product_select
                    .profile-frm-cl1 SUBCATEGORY
                    .profile-frm-cl2
                      select.product_sub_category(name='sub_category_id', required='required')
                        option(value='0') Select Sub Category
                        each fetchSubCategory in fetchSubCategories
                          option(value='#{fetchSubCategory._id}',selected=(fetchSubCategory._id == productRes.sub_category_id)) #{fetchSubCategory.name}

                  .profile-frm-row.product_select
                    .profile-frm-cl1 PRICE
                    .profile-frm-cl2
                      input.product_desc(type='text', name='price', value='#{productRes.price}', required='required')
                  
                  
                  .profile-frm-row.product_select
                    .profile-frm-cl1 COLOR
                    .profile-frm-cl2
                      select.color(name='color[]', required='required')
                        each fetchAllColor in fetchAllColors
                            each clr in productRes.color
                                option(value='#{fetchAllColor._id}',selected=(fetchAllColor._id == clr)) #{fetchAllColor.color_name}
                  
                  
                  .profile-frm-row.product_select
                    .profile-frm-cl3
                      a(href='#') APPLY DISCOUNT CODE
                      
                  -for(var i=0;i< (productRes.color.length -1); i++){
                  .profile-frm-row.product_select.slctClr
                    .profile-frm-cl1
                    .profile-frm-cl2
                      select.color(name='color[]', required='required')
                        each fetchAllColor in fetchAllColors
                          option(value='#{fetchAllColor._id}',selected=(fetchAllColor._id == productRes.color[i])) #{fetchAllColor.color_name}
                  -}
                  
                  .profile-frm-row#addClrBtn2
                    .profile-frm-cl3
                      a(href='javascript:void(0);',id='addMoreColor') ADD COLOR

            .modal-footer
              input.saveproduct(type='submit', name='saveproduct', value='POST TO FEED')
        script(type='text/javascript').
            $(document).ready(function(n){
                $('#ancUpProduct').trigger('click');
                attributeOptions = '#{productRes.attribute}';
                getSizeOptions($("#product_gender_edit").val(),'addClrBtn2');
            });
    -}
    style.
        .add_product .modal-body ul li{width:25%;}
